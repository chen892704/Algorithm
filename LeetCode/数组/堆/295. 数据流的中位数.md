# 295. 数据流的中位数
> 来源：力扣（LeetCode）
链接：https://leetcode.cn/problems/find-median-from-data-stream/description

中位数是有序整数列表中的中间值。如果列表的大小是偶数，则没有中间值，中位数是两个中间值的平均值。

例如 `arr = [2,3,4]` 的中位数是 `3` 。
例如 `arr = [2,3]` 的中位数是 `(2 + 3) / 2 = 2.5` 。
实现 `MedianFinder` 类:

`MedianFinder()` 初始化 `MedianFinder` 对象。

`void addNum(int num)` 将数据流中的整数 `num` 添加到数据结构中。

`double findMedian()` 返回到目前为止所有元素的中位数。与实际答案相差 `10^5` 以内的答案将被接受。

## 解题思路
参考 [如何自然引入大小堆？简洁写法！ -- 灵茶山艾府](https://leetcode.cn/problems/find-median-from-data-stream/solutions/3015873/ru-he-zi-ran-yin-ru-da-xiao-dui-jian-ji-4v22k/)

使用两个堆来分别存储有序列表一半的数据：
- 最大堆 `left` 存列表中较小的一半数据，最小堆 `right` 存列表中较大的一半数据，若总数为奇数 `left` 固定比 `right` 多 `1`
- 当前列表为奇数个数字，则 `left.top` 为中位数
- 当前列表为偶数个数字，则 `(left.top + right.top) / 2` 为中位数
- 当添加元素时：
    - 如果当前 `left` 的大小和 `right` 的大小相等，先把 `num` 加到 `right` 中，然后把 `right` 的最小值从 `right` 中去掉，并添加到 `left` 中
    - 如果当前 `left` 比 `right` 多 `1` 个数，先把 `num` 加到 `left` 中，然后把 `left` 的最大值从 `left` 中去掉，并添加到 `right` 中


**特别注意：**
- 当数量为偶数时，计算中位数时要除以 `2.0` 以转成浮点数 `double`

## 代码实现
```cpp
class MedianFinder {
private:
    priority_queue<int> left; // 大根堆
    priority_queue<int, vector<int>, greater<> > right; // 小根堆

public:
    MedianFinder() {}

    /* 规定：元素为奇数个数时，left 比 right 多一个数 */

    void addNum(int num) {
        // 当前左右大小相等
        if (left.size() == right.size()) {
            // 先把 num 加入 right, 把 right 最小值挪到 left
            right.push(num);
            left.push(right.top());
            right.pop();
        }
        // 当前左右大小不等 (即 left 比 right 多 1)
        else {
            // 先把 num 加入 left, 把 left 最大值挪到 right
            left.push(num);
            right.push(left.top());
            left.pop();
        }
    }
    
    double findMedian() {
        // 如果数组是奇数(left 比 right 多 1)，返回 left 堆顶
        if (left.size() != right.size()) {
            return left.top();
        }

        // 否则返回 (left 堆顶 + right 堆顶) / 2 
        return (left.top() + right.top()) / 2.0;
    }
};

/**
 * Your MedianFinder object will be instantiated and called as such:
 * MedianFinder* obj = new MedianFinder();
 * obj->addNum(num);
 * double param_2 = obj->findMedian();
 */
```
